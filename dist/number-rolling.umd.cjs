(function(h,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(h=typeof globalThis<"u"?globalThis:h||self,o(h["number-rolling"]={}))})(this,function(h){"use strict";var N=Object.defineProperty;var C=(h,o,a)=>o in h?N(h,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):h[o]=a;var n=(h,o,a)=>(C(h,typeof o!="symbol"?o+"":o,a),a);const o=(c,r)=>(c>r?c:r).toString().length,a=(c,r)=>{const s=(t,i)=>t.length<i?s("0"+t,i):t;return(t=>t.split("").map(Number))(s(c.toString(),r)).reverse()},A=c=>Object.prototype.toString.call(c)==="[object String]";class y{constructor({node:r,from:s=0,easeFn:e=f=>(f/=.5)<1?.5*Math.pow(f,3):.5*(Math.pow(f-2,3)+2),systemArr:t=[0,1,2,3,4,5,6,7,8,9],duration:i=.5,to:l,direct:d=!0,delay:m,separator:u,separateOnly:p=0,separateEvery:b=3,letterMargin:g=0}){n(this,"node");n(this,"from");n(this,"easeFn");n(this,"systemArr");n(this,"beforeArr");n(this,"afterArr");n(this,"numberColumnNodeArr");n(this,"duration");n(this,"to");n(this,"direct");n(this,"separator");n(this,"separateOnly");n(this,"separateEvery");n(this,"height");n(this,"letterMargin");this.beforeArr=[],this.afterArr=[],this.numberColumnNodeArr=[],this.duration=i*1e3,this.systemArr=t,this.easeFn=e,this.from=s,this.to=l||0,this.node=r,this.direct=d,this.separator=u,this.separateOnly=p,this.separateEvery=p?0:b,this.letterMargin=g,this._initHTML(o(this.from,this.to)),this.setSelect(this.from),l!==void 0&&(m?setTimeout(()=>this.rollTo({to:this.to}),m):this.rollTo({to:this.to}))}_initHTML(r){for(;this.node.lastChild;)this.node.removeChild(this.node.lastChild);this.node.classList.add("number-roll"),this.node.style.position="relative",this.node.style.overflow="hidden",this.node.style.display="block",this.node;for(let e=0;e<r;e++){const t=document.createElement("div");if(t.classList.add(`ncn${e}`),t.classList.add("ncn"),t.style.position="relative",t.style.display="inline-block",t.style.verticalAlign="top",t.style.margin=`0 ${this.letterMargin}px`,[...this.systemArr,this.systemArr[0]].forEach(d=>{const m=document.createElement("div");m.className="digit",m.innerHTML=`${d}`,t.appendChild(m)}),this.numberColumnNodeArr.unshift(t),this.node.appendChild(t),this.beforeArr.push(0),!this.separator||!this.separateOnly&&!this.separateEvery||e===r-1||(r-e)%this.separateEvery!=1&&r-e-this.separateOnly!=1)continue;const i=A(this.separator)?this.separator:this.separator.shift(),l=document.createElement("div");l.className="sprtr",l.style.display="inline-block",l.innerHTML=i,this.node.appendChild(l)}const s=()=>{if(this.height=this.numberColumnNodeArr[0].clientHeight/(this.systemArr.length+1),this.node.style.height=this.height+"px",!this.afterArr.length)for(let e=0,t=this.numberColumnNodeArr.length;e<t;e++)this._draw({digit:e,per:1,alter:~~(this.from/Math.pow(10,e))})};s(),window.addEventListener("resize",s)}_draw({per:r,alter:s,digit:e}){const t=this.numberColumnNodeArr[0].clientHeight/(this.systemArr.length+1);this.height!==t&&(this.height=t);const i=this.beforeArr[e],d=`translateY(${-(((r*s+i)%10+10)%10)*(this.height||0)}px) `;this.numberColumnNodeArr[e].style.webkitTransform=d,this.numberColumnNodeArr[e].style.transform=d}frame(r){let s=0;for(let e=this.numberColumnNodeArr.length-1;e>=0;e--){const t=this.afterArr[e]-this.beforeArr[e];s+=t,this._draw({digit:e,per:this.easeFn(r),alter:this.direct?t:s}),s*=10}}rollTo({to:r,duration:s=0,easeFn:e,direct:t}){e&&(this.easeFn=e),t!==void 0&&(this.direct=t),this.setSelect(r);const i=this.numberColumnNodeArr.length;this.beforeArr=a(this.from,i),this.afterArr=a(r,i);const l=Date.now(),d=s*1e3||this.duration,m=()=>{const u=Date.now()-l;this.frame(u/d),u<d?requestAnimationFrame(m):(this.from=r,this.frame(1))};requestAnimationFrame(m)}setSelect(r){const s=this.numberColumnNodeArr.length;a(r,s).forEach((e,t)=>{for(let i=0;i<this.numberColumnNodeArr[t].childNodes.length;i++){const l=this.numberColumnNodeArr[t].childNodes[i];l.style.userSelect=i===e?"auto":"none"}})}}h.Roll=y,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
